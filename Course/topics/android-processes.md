# Процессы

<secondary-label ref="wip"/>

В Линукс при запуске системы ядро инициирует основной процесс с id равным 1. Остальные процессы являются дочерними и
создаются при помощи одной из двух команд: `exec()` и `fork()`.

`exec()` заменяет предыдущий экземпляр процесса, при этом наследуя все его данные и ресурсы
`fork()` копирует родительский процесс, но присваивает новый идентификатор, а так же привязывает дочерний процесс к
родительскому по идентификатору родителя

Процессы в Андроиде создаются командой `fork()` от процесса **Zygote**, в который уже подключены все системные
библиотеки и ресурсы, необходимые для работы приложения.

<img src="Android_processes1.png" alt=""/>

Каждое приложение запускается в собственном процессе и уникальным пользователем (регистрируется для приложения), с
соответствующим имени пакета приложения именем.

Но есть возможность запустить несколько приложений в одном процессе,
если прописать в манифестах один `android:sharedUserId="your_shared_applications_process_id"` и имя
процесса `android:process="com.shared.process.name.example"` для блока `application`.

> Однако такой способ был объявлен устаревшим, и Google рекомендует пользоваться механизмами межпроцессного
> взаимодействия (IPC) c API 29
> {style="warning"}

Кроме того есть возможность запускать каждый Андроид компонент в дочернем процессе. Для этого у
компонента (`reciever`, `activity`, `provider`, `service`) нужно указать свойство `android:process=:child_N`.

> Стоит помнить, что каждый процесс - это изолированная среда исполнения приложения. Как следствие это может привести
> к ошибкам доступа к ресурсам, например с доступом к БД и memory cache. Кроме того, объект класса Application будет
> инициализирован отдельно для каждого процесса, что приведет к полной изоляции DI графов
> {style="warning"}